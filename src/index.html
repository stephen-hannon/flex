<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Flexible &ndash; A Flex Point Analyzer</title>
	<meta name="description" content="A free tool for Notre Dame students to analyze and track Flex Point usage">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://stephen-hannon.github.io/flexible/">
	<meta property="og:title" content="Flexible &ndash; A Flex Point Analyzer">
	<meta property="og:description" content="A free tool for Notre Dame students to analyze and track Flex Point usage">
	<meta property="og:image" content="https://stephen-hannon.github.io/flexible/social-image.png">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://stephen-hannon.github.io/flexible/">
	<meta property="twitter:title" content="Flexible &ndash; A Flex Point Analyzer">
	<meta property="twitter:description" content="A free tool for Notre Dame students to analyze and track Flex Point usage">
	<meta property="og:image" content="https://stephen-hannon.github.io/flexible/social-image.png">

	<link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
	<link rel="manifest" href="./site.webmanifest">
	<link rel="mask-icon" href="./safari-pinned-tab.svg" color="#27bc68">
	<meta name="apple-mobile-web-app-title" content="Flexible">
	<meta name="application-name" content="Flexible">
	<meta name="msapplication-TileColor" content="#27bc68">
	<meta name="theme-color" content="#27BC68">

	<style>[v-cloak] { display: none !important; }</style>

	<link href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif:700&display=fallback" rel="stylesheet preconnect">
</head>

<body>
<div id="flexible" class="wrapper">
	<header role="banner">
		<h1 class="flex-grow padding-base">
			<a href="." @click.prevent="this.location.reload()">
				<svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79.86 17.12" height="32" role="img" aria-labelledby="logo-title">
					<title id="logo-title">Flexible</title>
					<polygon fill="#fff" points="13 10.85 12 10.85 12 7.85 10 7.85 10 6.85 7 6.85 7 4.85 3 4.85 3 3.85 0 3.85 0 2.85 4 2.85 4 3.85 8 3.85 8 5.85 11 5.85 11 6.85 13 6.85 13 10.85"/>
					<g fill="#fff">
						<polygon points="4.5 2.35 4.5 3.35 8.5 3.35 8.5 3.85 13 3.85 13 0.85 0 0.85 0 2.35 4.5 2.35"/>
						<polygon points="11.5 8.35 9.5 8.35 9.5 7.35 6.5 7.35 6.5 6.85 4 6.85 4 5.35 2.5 5.35 2.5 4.35 0 4.35 0 16.85 4 16.85 4 9.85 11.5 9.85 11.5 8.35"/>
						<path d="M18.74,17.12a3.67,3.67,0,0,1-1.61-.31,2.61,2.61,0,0,1-1-.88,3.76,3.76,0,0,1-.56-1.37,8.55,8.55,0,0,1-.16-1.75V.87h3.77V13a1.15,1.15,0,0,0,.21.8.58.58,0,0,0,.4.21h.19a.76.76,0,0,0,.21-.05l.44,2.89a3.83,3.83,0,0,1-.76.23A5.63,5.63,0,0,1,18.74,17.12Z"/>
						<path d="M27,17.12a6.07,6.07,0,0,1-2.24-.4A5,5,0,0,1,23,15.55a5.49,5.49,0,0,1-1.19-1.89,7,7,0,0,1-.44-2.55,6.64,6.64,0,0,1,.45-2.51A5.94,5.94,0,0,1,23,6.7a5,5,0,0,1,1.68-1.19,5.11,5.11,0,0,1,4.06,0,4.25,4.25,0,0,1,1.49,1.2,5.11,5.11,0,0,1,.88,1.76,7.62,7.62,0,0,1,.3,2.16c0,.35,0,.68-.05,1s-.07.53-.1.66H25a2.23,2.23,0,0,0,.94,1.44,3.07,3.07,0,0,0,1.6.4A3.78,3.78,0,0,0,28.62,14a6.2,6.2,0,0,0,1.13-.52L31,15.79a6.31,6.31,0,0,1-2,1A6.9,6.9,0,0,1,27,17.12Zm1.18-7.39a2.12,2.12,0,0,0-.32-1.16,1.28,1.28,0,0,0-1.17-.49,1.71,1.71,0,0,0-1.11.39,2.1,2.1,0,0,0-.64,1.26Z"/>
						<path d="M35.32,10.88,32.2,5.37h4L37,7l.87,2H38c.1-.32.21-.65.33-1s.23-.67.33-1l.52-1.61h3.91l-3.12,6,3.29,5.51h-4l-.88-1.61q-.24-.48-.48-1l-.48-1h-.09c-.12.32-.24.64-.37,1s-.26.67-.38,1l-.61,1.61H32Z"/>
						<path d="M46.71,4A2.17,2.17,0,0,1,45.2,3.4,1.88,1.88,0,0,1,44.61,2,1.87,1.87,0,0,1,45.2.55a2.36,2.36,0,0,1,3,0A1.87,1.87,0,0,1,48.82,2a1.88,1.88,0,0,1-.59,1.43A2.18,2.18,0,0,1,46.71,4ZM44.83,5.37H48.6V16.85H44.83Z"/>
						<path d="M57.23,17.12a3,3,0,0,1-1.42-.37,5,5,0,0,1-1.34-1.14h-.08l-.31,1.24H51.14V.87h3.77V4.59l-.09,1.65a4.33,4.33,0,0,1,1.28-.85,3.72,3.72,0,0,1,1.42-.29,3.64,3.64,0,0,1,1.75.41,3.77,3.77,0,0,1,1.35,1.17,5.92,5.92,0,0,1,.87,1.84,8.86,8.86,0,0,1,.3,2.38,8.27,8.27,0,0,1-.38,2.65,6.15,6.15,0,0,1-1,2,4.44,4.44,0,0,1-1.45,1.2A3.71,3.71,0,0,1,57.23,17.12Zm-.91-3.21a1.39,1.39,0,0,0,1.13-.64,3.94,3.94,0,0,0,.49-2.3,4,4,0,0,0-.39-2,1.27,1.27,0,0,0-1.15-.62,1.66,1.66,0,0,0-.78.18,2.73,2.73,0,0,0-.71.65v4.22a1.92,1.92,0,0,0,.68.44A2.58,2.58,0,0,0,56.32,13.91Z"/>
						<path d="M67.23,17.12a3.67,3.67,0,0,1-1.61-.31,2.55,2.55,0,0,1-1-.88A3.6,3.6,0,0,1,64,14.56a8.51,8.51,0,0,1-.17-1.75V.87h3.77V13a1.15,1.15,0,0,0,.21.8.6.6,0,0,0,.41.21h.18a.63.63,0,0,0,.21-.05l.44,2.89a3.63,3.63,0,0,1-.76.23A5.59,5.59,0,0,1,67.23,17.12Z"/>
						<path d="M75.47,17.12a6,6,0,0,1-2.23-.4,4.93,4.93,0,0,1-1.79-1.17,5.67,5.67,0,0,1-1.2-1.89,7,7,0,0,1-.43-2.55,6.64,6.64,0,0,1,.45-2.51,5.94,5.94,0,0,1,1.18-1.9,5,5,0,0,1,1.68-1.19,4.71,4.71,0,0,1,2-.41,4.77,4.77,0,0,1,2.1.43,4.08,4.08,0,0,1,1.49,1.2,5.13,5.13,0,0,1,.89,1.76,7.62,7.62,0,0,1,.3,2.16,7.74,7.74,0,0,1-.06,1c0,.3-.07.53-.1.66H73.46a2.16,2.16,0,0,0,.94,1.44,3,3,0,0,0,1.6.4A3.67,3.67,0,0,0,77.1,14a5.91,5.91,0,0,0,1.13-.52l1.23,2.34a6.37,6.37,0,0,1-2,1A7,7,0,0,1,75.47,17.12Zm1.18-7.39a2.12,2.12,0,0,0-.31-1.16,1.3,1.3,0,0,0-1.18-.49,1.66,1.66,0,0,0-1.1.39,2.11,2.11,0,0,0-.65,1.26Z"/>
					</g>
				</svg>
				<span class="logo-beta" title="This app is in the beta stage. There may be bugs present, and features may change in the future.">beta</span>
			</a>
		</h1>

		<ul class="flatlist header-links" role="navigation">
			<li><a href="https://stephen-hannon.github.io" target="_blank" rel="noreferrer">
				<i class="fas fa-user"></i>
				<span class="header-links-text"><span class="hide-below-s">By</span> Stephen Hannon</span>
			</a></li>
			<li><a href="https://github.com/stephen-hannon/flexible" target="_blank" rel="noreferrer">
				<i class="fab fa-github"></i>
				<span class="header-links-text">Source <span class="hide-below-s">code</span></span>
			</a></li>
			<li><a href="https://goo.gl/forms/Sw20wbBGAIeyeTt02" target="_blank" rel="noreferrer">
				<i class="fas fa-comment-alt"></i>
				<span class="header-links-text">Feedback</span>
			</a></li>
		</ul>
	</header>

	<div v-if="loaderShow" class="loader">Loading...</div>

	<div class="content-container" v-cloak>
		<section id="instructions" class="padding-base">
			<h2>Instructions</h2>
			<h3>Analyze your Flex Point usage &amp; start spending smarter.</h3>
			<p>This is a tool to help you keep track of how quickly you're spending your Flex Points. Choose an option to see how it works, or, if you're a Notre Dame student, see your own results.</p>

			<div class="rowbox-container">
				<app-card>
					<h4>Quick</h4>
					<p id="label-quickbalance">Enter your current {{ semesterCurrent.name }} balance &amp; press <kbd>Enter</kbd></p>
					<app-input
						:min="0" :max="startBalance"
						:step="0.01"
						:placeholder="remainingBalanceIdealCurrent.toFixed(2)"
						aria-labelledby="label-quickbalance"
						@submit="useQuick"
					></app-input>
				</app-card>

				<app-card>
					<h4>In-depth</h4>
					<p id="label-rawdata">Paste your usage data (see below{{ platformGuess === 'mobile' ? '&mdash;not recommended on mobile' : '' }})</p>
					<textarea
						class="appearance-textfield full-width"
						autocomplete="off"
						cols="50" rows="1"
						aria-labelledby="label-rawdata"
						v-model="rawData"
						@input="$event.target.blur()"
					></textarea>

					<div class="errors" v-cloak>
						<app-message
							v-if="rawDataError"
							type="error"
							@close="rawDataError = false"
						>
							<p>Unable to parse the data you pasted. Make sure there are lines of the form:</p>
							<pre class="pre-wrap">Flex Points	September 9, 2019, 6:48PM	C-Store 1	- $5.08</pre>
						</app-message>
					</div>
				</app-card>

				<app-card>
					<h4>Just looking</h4>
					<button class="button full-width" @click="useDemo">View demo</button>
				</app-card>
			</div>

			<app-collapsible header="In-depth instructions" :collapsed.sync="collapseInstructions">
				<p>Follow these quick instructions to see your own full personalized results.</p>

				<ul class="flatlist tabs" role="tablist">
					<li v-for="tab in ['windows', 'macos', 'mobile']" role="presentation">
						<button
							class="tab"
							role="tab"
							:class="{ 'tab-active': tabOption === tab }"
							:aria-selected="tabOption === tab"
							@click="tabOption = tab"
						>
							{{ tabOptions[tab] }}
						</button>
					</li>
				</ul>

				<div class="tabs-content" role="tabpanel">
					<ol class="fancylist">
						<li>
							{{ tabOption === 'mobile' ? 'Tap' : 'Click' }} the link to
							<strong>log in to
								<a
									href="https://get.cbord.com/irish1card/full/login.php"
									target="_blank"
									title="Irish1Card GET (opens in a new tab)"
									rel="noreferrer"
								>Irish1Card&nbsp;GET</a>
							</strong>
							with your Notre Dame credentials.
						</li>
						<li>
							Under the "My Recent Transactions" header,
							<strong>{{ tabOption === 'mobile' ? 'tap' : 'click' }} "View All Transaction History."</strong>
						</li>
						<li>
							Making sure "ALL in the past 6 Months" is selected in the Month/Year dropdown, <strong>copy the entire table</strong> (or the entire page&mdash;anything extra will be ignored).
							<strong v-if="tabOption === 'mobile'" class="color-error">Note that copying large blocks of text on a mobile device can be difficult. A desktop or laptop computer is recommended for optimal exprience.</strong>
							<template v-else>For a shortcut, press <kbd>{{ ctrlOrCmd }}</kbd>+<kbd>A</kbd> to select all and <kbd>{{ ctrlOrCmd }}</kbd>+<kbd>C</kbd> to copy.</template>
						</li>
						<li>
							<strong>Paste it into the text box above.</strong> (Don't worry, all your data stays in your browser.)
							<template v-if="tabOption !== 'mobile'">For a shortcut, press <kbd>{{ ctrlOrCmd }}</kbd>+<kbd>V</kbd> to paste.</template>
						</li>
					</ol>
				</div>
			</app-collapsible>

			<footer role="contentinfo">
				<p>This app is not affiliated with the University of Notre Dame or CBORD.</p>
			</footer>
		</section>

		<section id="results" class="padding-base section-bg-white">
			<h2>Results</h2>
			<h3 id="results-header">
				{{ semester.name }}
				<template v-if="processedView">balance: {{ remainingBalance | currency }}
					(<span
						:class="{
							'color-behind': remainingBalanceRelative &lt; -10,
							'color-ahead': remainingBalanceRelative &gt; 10,
						}"
					>{{ Math.abs(remainingBalanceRelative) | currency }} {{ remainingBalanceRelative &lt; 0 ? 'behind' : 'ahead' }}</span>)
				</template>
				<template v-else>ideal balance: {{ remainingBalanceIdeal | currency }}</template>
			</h3>

			<app-chart
				class="chart"
				v-bind="chartProps"
			></app-chart>
			<div id="chart" style="display: none;"></div>

			<div class="rowbox-container">
				<app-card :wide="true">
					<h4>Before now</h4>
					<app-stats-list :rates="rates.past"></app-stats-list>
				</app-card>

				<app-card :wide="true">
					<h4>After now</h4>
					<app-stats-list :rates="rates.future"></app-stats-list>
				</app-card>
			</div>

			<div class="rowbox-container">
				<app-card>
					<h4>
						Start
						<app-date-adjust
							:is-start="true"
							:semester="semester"
							:show-reset="!!manualDates.start[semester.id]"
							@date-change="changeSemesterDate"
						></app-date-adjust>
					</h4>

					<p>{{ semester.start | date }}</p>
					<app-input
						:min="0"
						aria-label="Start balance"
						v-model="startBalance"
					></app-input>
				</app-card>

				<app-card>
					<h4>Now</h4>
					<p>{{ now | date }}</p>

					<app-input
						:min="0" :max="startBalance"
						:step="0.01"
						:disabled="!inSemester || rawDataComplete"
						aria-label="Current remaining balance"
						:value="remainingBalanceSafe.toFixed(2)"
						@submit="adjustIncompleteData"
					></app-input>

					<div class="errors errors-above" v-cloak>
						<app-message
							v-if="inSemester && !rawDataComplete && showMessages.rawDataComplete"
							@close="showMessages.rawDataComplete = false"
						>
							<p>The data you pasted doesn't go back to the beginning of the semester. Enter your current balance here and press <kbd>Enter</kbd> to get accurate results (a guess is fine).</p>
						</app-message>
					</div>
				</app-card>

				<app-card>
					<h4>
						End
						<app-date-adjust
							:is-start="false"
							:semester="semester"
							:show-reset="!!manualDates.end[semester.id]"
							@date-change="changeSemesterDate"
						></app-date-adjust>
					</h4>

					<p>{{ semester.end | date }}</p>
					$ <input
						type="number"
						class="appearance-textfield hide-steppers"
						aria-label="End balance (0)"
						value="0"
						disabled
					/>
				</app-card>
			</div>
		</section>
	</div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-126257561-1"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-126257561-1');
</script>
</body>
</html>
